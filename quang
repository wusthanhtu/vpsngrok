Viblo
Avatar
Dark Lotus @X-Cotang
 217  7  2
ÄÃ£ Ä‘Äƒng vÃ o thg 4 5, 3:44 CH  3 phÃºt Ä‘á»c
2.1K
ÄÆ°á»£c rá»“i, Ä‘i thÃ´i!!! VPS free nÃ¨ (^.^) [P1]
Báº¡n lÃ  sinh viÃªn, báº¡n lÃ  láº­p trÃ¬nh viÃªn khÃ³ khÄƒn vá» máº·t tÃ i chÃ­nh, báº¡n khÃ´ng cÃ³ xiá»n thuÃª VPS, khÃ´ng sao háº¿t, Ä‘á»«ng lo láº¯ngðŸ¥µðŸ˜µ!!! HÃ´m nay mÃ¬nh sáº½ hÆ°á»›ng dáº«n cho cÃ¡c báº¡n cÃ¡ch táº¡o VPS free báº±ng Github Workflow & Ngrok ðŸ˜¬ ðŸ˜¬ ðŸ˜¬ . BÃ i viáº¿t nÃ y lÃ  bÃ i viáº¿t Ä‘áº§u tay cá»§a mÃ¬nh vÃ  má»Ÿ Ä‘áº§u chuá»—i seri bÃ i viáº¿t vá» chá»§ Ä‘á» táº¡o VPS free cho má»i nhÃ . ÄÆ°á»£c rá»“i ðŸ˜ Ä‘i thÃ´i !!! ðŸ‘‰

LÃ½ thuyáº¿t (TLDR)
MÃ¬nh xin phÃ©p tÃ³m táº¯t nhanh pháº§n lÃ­ thuyáº¿t cho nhá»¯ng báº¡n nÃ o chÆ°a biáº¿t ðŸ˜…:

GitHub Actions
TÃ i liá»‡u: https://docs.github.com/en/actions

GitHub Actions is a continuous integration and continuous delivery (CI/CD) platform that allows you to automate your build, test, and deployment pipeline. You can create workflows that build and test every pull request to your repository, or deploy merged pull requests to production.

GitHub Actions goes beyond just DevOps and lets you run workflows when other events happen in your repository. For example, you can run a workflow to automatically add the appropriate labels whenever someone creates a new issue in your repository.

GitHub provides Linux, Windows, and macOS virtual machines to run your workflows, or you can host your own self-hosted runners in your own data center or cloud infrastructure.

ChÃºng ta cÃ³ thá»ƒ hiá»ƒu Ä‘Æ¡n giáº£n GitHub Actions lÃ  má»™t event-driven nghÄ©a lÃ  chÆ°Æ¡ng trÃ¬nh cháº¡y má»™t loáº¡t jobs (cÃ¡c dÃ²ng lá»‡nh) khi nháº­n Ä‘Æ°á»£c 1 event. Trong jobs phÃ¢n chia thÃ nh nhiá»u step khÃ¡c nhau vÃ  sáº¯p xáº¿p cÃ¡c step Ä‘á»ƒ cháº¡y
VÃ­ dá»¥:


Workflow trÃªn sáº½ thá»±c thi cÃ¡c job khi Ä‘Æ°á»£c nháº­n event workflowdispatch (ngÆ°á»i dÃ¹ng run workflow theo cÃ¡ch thá»§ cÃ´ng tá»« Actions tab) .

Ngork
Ngrok lÃ  cÃ´ng cá»¥ táº¡o Ä‘Æ°á»ng háº§m (tunnel) giá»¯a localhost cá»§a báº¡n vÃ  internet hay nÃ³i má»™t cÃ¡ch Ä‘Æ¡n giáº£n nÃ³ lÃ  cÃ´ng cá»¥ giÃºp public cá»•ng trÃªn mÃ¡y báº¡n ra ngoÃ i internet.
Vá»›i cÃ´ng cá»¥ nÃ y chÃºng ta cÃ³ thá»ƒ public cÃ¡c cá»•ng nhÆ° 3389,22 tá»« local Ä‘á»ƒ cÃ³ thá»ƒ thá»±c hiá»‡n remote mÃ¡y tÃ­nh tá»« xa Link download: https://ngrok.com/download

Thá»±c hÃ nh
Táº¡o tÃ i khoáº£n
Github: Náº¿u báº¡n Ä‘Ã£ cÃ³ tÃ i khoáº£n thÃ¬ mÃ¬nh khuyáº¿n cÃ¡o báº¡n nÃªn táº¡o tÃ i khoáº£n má»›i Ä‘á»ƒ trÃ¡nh tÃ i khoáº£n cÅ© bá»‹ ban.
Link Ä‘Äƒng kÃ­: https://github.com/signup

Ngrok: Thá»±c hiá»‡n táº¡o tÃ i khoáº£n ngrok vÃ  lÆ°u láº¡i token
Link Ä‘Äƒng kÃ­: https://dashboard.ngrok.com/signup

Táº¡o repo
Thá»±c hiá»‡n táº¡o má»™t repo private


Táº¡o action
Chuyá»ƒn qua tab Actions vÃ  chá»n "Configure" Simple workflow


Thá»±c hiá»‡n sá»§a ná»™i dung blank.yml nhÆ° sau:
Äá»‘i vá»›i VPS window

name: Window

on:
  workflow_dispatch:

jobs:
  build:
    runs-on: windows-latest
    steps:
      - name: download ngrok
        shell: powershell
        run: |
          Invoke-WebRequest https://bin.equinox.io/c/4VmDzA7iaHb/ngrok-stable-windows-amd64.zip -OutFile ngrok.zip
          Expand-Archive ngrok.zip
      - name: run ngrok
        shell: powershell
        run: |
          .\ngrok\ngrok.exe authtoken $Env:NGROK_AUTH_TOKEN
          Start-Process Powershell -ArgumentList '-Noexit -Command ".\ngrok\ngrok.exe tcp 3389"'
        env:
          NGROK_AUTH_TOKEN: ${{ secrets.NGROK_AUTH_TOKEN }}
          
      - name: Activating RDP access.
        run: | 
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server'-name "fDenyTSConnections" -Value 0
          Enable-NetFirewallRule -DisplayGroup "Remote Desktop"
          Set-ItemProperty -Path 'HKLM:\System\CurrentControlSet\Control\Terminal Server\WinStations\RDP-Tcp' -name "UserAuthentication" -Value 1
        
      - name: Change pass for RDP.
        env: 
          ADMINPASSWORD: ${{ secrets.ADMINPASSWORD }}
        run: net user runneradmin $Env:ADMINPASSWORD
        
      - name: Get Ngrok 
        run: Invoke-WebRequest http://localhost:4040/api/tunnels
        
      - name: Run loop
        run: ping -t localhost

Äá»‘i vá»›i VPS ubuntu:

name: VPS
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: update and upgrade
        run: sudo apt-get update -y && sudo apt-get upgrade -y
      - name: install ngrok
        run: |
          curl -s https://ngrok-agent.s3.amazonaws.com/ngrok.asc | sudo tee /etc/apt/trusted.gpg.d/ngrok.asc >/dev/null && echo "deb https://ngrok-agent.s3.amazonaws.com buster main" | sudo tee /etc/apt/sources.list.d/ngrok.list && sudo apt update && sudo apt install ngrok
          
      - name: Run sshd
        run: sudo service sshd start
        
      - name: Change pass
        run: yes superpass | sudo passwd
        
      - name: add user
        run: |
          sudo useradd -m superuser
          yes superpass | sudo passwd superuser
          sudo usermod -aG sudo superuser

      - name: Run ngrok
        env:
          NGROK_AUTH_TOKEN: ${{ secrets.NGROK_AUTH_TOKEN }}
        run: |
          ngrok authtoken $NGROK_AUTH_TOKEN
          ngrok tcp 22 &
      - name: Get Ngrok
        run: curl http://localhost:4040/api/tunnels

      - name: run loop
        run: tail -f /dev/null
